{"version":3,"sources":["../../../src/modules/ufp-react/Runfest.jsx"],"names":["_Providers","_RootSibblings","_RootNode","_ReactApp","_ReactAppCreatorFunction","Runfest","name","description","register","rootNode","appCreatorFunction","registerProvider","component","push","registerRootSibbling","onPreStartup","UfpCore","App","currentRootComponent","sibblings","map","item","index","Component","length","render","getStore"],"mappings":";;;;;;AAAA;;AACA;;;;AACA;;AACA;;;;;;AACA;AACA,IAAIA,aAAa,EAAjB;AACA,IAAIC,iBAAiB,EAArB;AACA,IAAIC,YAAY,IAAhB;AACA,IAAIC,YAAY,IAAhB;AACA,IAAIC,2BAA2B,IAA/B;;AAEA,IAAMC,UAAU;AACZC,UAAM,WADM;AAEZC,iBAAa,oBAFD;;AAIZC,cAAU,wBAGJ;AAAA,iCAFFC,QAEE;AAAA,YAFFA,QAEE,iCAFS,yBAAW,yDAAX,CAET;AAAA,yCADFC,kBACE;AAAA,YADFA,kBACE,yCADmB,yBAAW,gFAAX,CACnB;;AACFR,oBAAYO,QAAZ;AACAL,mCAA2BM,kBAA3B;AACA;AACA;AACH,KAZW;;AAcZC,sBAAkB,iCAEZ;AAAA,YADFC,SACE,SADFA,SACE;;AACF;AACAZ,mBAAWa,IAAX,CAAgBD,SAAhB;AACH,KAnBW;;AAqBZE,0BAAsB,qCAEhB;AAAA,oCADFF,SACE;AAAA,YADFA,SACE,mCADU,yBAAW,uCAAX,CACV;;AACF;AACAX,uBAAeY,IAAf,CAAoBD,SAApB;AACH,KA1BW;;AA4BZG,kBAAc,6BAAe;AAAA,YAAbC,OAAa,SAAbA,OAAa;;AACzB;AACAb,oBAAYC,yBAAyB,EAACY,gBAAD,EAAzB,CAAZ;;AAEA;;AAEA,YAAMC,MAAMd,SAAZ;;AAEA,YAAIe,uBAAwB,8BAAC,GAAD,OAA5B;;AAEA,YAAMC,YAAY,EAAlB;AACA;;AAEAlB,uBAAemB,GAAf,CAAmB,UAACC,IAAD,EAAOC,KAAP,EAAiB;AAChC,gBAAMC,YAAYF,IAAlB;AACAF,sBAAUN,IAAV,CAAe,8BAAC,SAAD,IAAW,KAAK,aAAaS,KAA7B,GAAf;AACH,SAHD;;AAKAtB,mBAAWoB,GAAX,CAAe,UAACC,IAAD,EAAOC,KAAP,EAAiB;AAC5B,gBAAMC,YAAYF,IAAlB;AACA;AACA;AACA;AACAH,mCACI;AAAC,yBAAD;AAAA;AAAYI,0BAAU,CAAV,GACPH,UAAUK,MAAV,KAAqB,CAArB,GAAyBN,oBAAzB,GACG;AAAA;AAAA;AAAMA,wCAAN;AAA4BC;AAA5B,iBAFI,GAE4CD;AAFxD,aADJ;AAIH,SATD;AAUA;;AAEA,2BAASO,MAAT,CAAgB;AAAA;AAAA,cAAU,OAAOT,QAAQU,QAAR,EAAjB;AAAsCR;AAAtC,SAAhB,EAAwFhB,SAAxF;AAEH;AA5DW,CAAhB;;kBA+DeG,O","file":"Runfest.js","sourcesContent":["import {ThrowParam} from '../../utils/JSUtils'\nimport ReactDOM from 'react-dom'\nimport {Provider} from 'react-redux'\nimport React from 'react'\n// dummy for eslint without standard-react\nvar _Providers = []\nvar _RootSibblings = []\nvar _RootNode = null\nvar _ReactApp = null\nvar _ReactAppCreatorFunction = null\n\nconst Runfest = {\n    name: 'ufp-react',\n    description: 'Ufp React Runfest ',\n\n    register: ({\n        rootNode = ThrowParam('HTML RootNode required for initialisation of ufp-react '),\n        appCreatorFunction = ThrowParam('JSX Root Component appCreatorFunction required for initialisation of ufp-react')\n    }) => {\n        _RootNode = rootNode\n        _ReactAppCreatorFunction = appCreatorFunction\n        // console.log('ufp-react root:', rootNode)\n        // console.log('ufp-react aappCreatorFunctionpp:', appCreatorFunction)\n    },\n\n    registerProvider: ({\n        component\n    }) => {\n        // console.log('ufp-react root provider registered:', component)\n        _Providers.push(component)\n    },\n\n    registerRootSibbling: ({\n        component = ThrowParam('component Root sibbling has to be set')\n    }) => {\n        // console.log('ufp-react root sibbling :', component)\n        _RootSibblings.push(component)\n    },\n\n    onPreStartup: ({UfpCore}) => {\n        // console.log('ufp-reactx onPreStartup called React ', UfpCore)\n        _ReactApp = _ReactAppCreatorFunction({UfpCore})\n\n        // console.log('ufp-reactx', _RootNode, _ReactApp)\n\n        const App = _ReactApp\n\n        var currentRootComponent = (<App />)\n\n        const sibblings = []\n        // console.log('ufp-reactx Root Sibblings are ', sibblings)\n\n        _RootSibblings.map((item, index) => {\n            const Component = item\n            sibblings.push(<Component key={'sibbling' + index} />)\n        })\n\n        _Providers.map((item, index) => {\n            const Component = item\n            // remark: here the enclosing div is required because some root\n            // component providers rely on single child policy ... tsts even china got rid of it...\n            // trick here is summing up all providers as childs\n            currentRootComponent = (\n                <Component>{index === 0 ?\n                    (sibblings.length === 0 ? currentRootComponent :\n                        <div>{currentRootComponent}{sibblings}</div>) : currentRootComponent }</Component>)\n        })\n        // console.log('ufp-reactx RootComponent is  ', currentRootComponent)\n\n        ReactDOM.render(<Provider store={UfpCore.getStore()}>{currentRootComponent}</Provider>, _RootNode\n        )\n    }\n}\n\nexport default Runfest\n"]}