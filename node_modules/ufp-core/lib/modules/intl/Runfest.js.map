{"version":3,"sources":["../../../src/modules/intl/Runfest.js"],"names":["onceRegistered","Runfest","version","name","NAME","description","actionCreators","selectors","configure","locales","languages","console","log","push","addLocaleData","locale","onRegistered","UfpCore","registerStagedResource","stage","actionCreator","initSetLanguage","actionNameSuccess","UPDATE_MESSAGES","getLocales","map","component","registerReducer","id","reducer"],"mappings":";;;;;;;;;;AAAA;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;AACA;;;;AACA;;AACA;;;;;;AACA,IAAIA,iBAAiB,KAArB;;AAEA,IAAMC,UAAU;AACZC,aAAS,OADG;AAEZC,UAAM,wBAAcC,IAFR;AAGZC,iBAAa,mCAHD;;AAKZC,gDALY;AAMZC,sCANY;;AAQZ;;;;AAIAC,eAAW,yBAIL;AAAA;;AAAA,gCAHFC,OAGE;AAAA,YAHFA,OAGE,gCAHQ,yBAAW,wCAAX,CAGR;AAAA,kCAFFC,SAEE;AAAA,YAFFA,SAEE,kCAFU,yBAAW,0CAAX,CAEV;;AACFC,gBAAQC,GAAR,CAAY,oBAAZ,EAAkCH,OAAlC;AACA,oDAAWA,OAAX,EAAmBI,IAAnB,6DAA2BJ,OAA3B;AACA,sDAAWC,SAAX,EAAqBG,IAArB,+DAA6BH,SAA7B;AACH,KApBW;;AAsBZI,mBAAe,uBAACC,MAAD,EAAY;AACvB;;;;AAIA,sCAAcA,MAAd;AACH,KA5BW;AA6BZC,gBA7BY,+BA6BsD;AAAA,kCAApDC,OAAoD;AAAA,YAApDA,OAAoD,iCAA1C,yBAAW,2BAAX,CAA0C;;AAC9DN,gBAAQC,GAAR,CAAY,kBAAZ,EAAgC,IAAhC;AACAD,gBAAQC,GAAR,CAAY,qBAAZ;;AAEA,YAAIZ,cAAJ,EAAoB;AAChB,qCAAW,6BAAX;AACH;AACDA,yBAAiB,IAAjB;;AAEA,uCAAoBkB,sBAApB,CAA2C;AACvCC,mBAAO,GADgC;AAEvChB,kBAAM,iBAFiC;AAGvCiB,2BAAe,6BAAmBC,eAHK;AAIvCC,+BAAmB,wBAAcC;AACjC;AALuC,SAA3C;;AAQA;AACA,6BAAWC,UAAX,GACWC,GADX,CACe,UAACV,MAAD,EAAY;AACbJ,oBAAQC,GAAR,CAAY,qBAAZ,EAAmCG,MAAnC;;AAEA,0CAAcA,MAAd;AACH,SALX;;AAOA,4CAAqB,EAACW,oCAAD,EAArB;;AAEAT,gBAAQU,eAAR,CAAwB;AAChBC,gBAAI,wBAAcxB,IADF;AAEhByB;AAFgB,SAAxB;AAKH;AA7DW,CAAhB;;kBAgEe5B,O","file":"Runfest.js","sourcesContent":["import {ThrowParam} from '../../utils/JSUtils'\r\nimport IntlConfig from './IntlConfig'\r\nimport IntlConstants from './IntlConstants'\r\nimport IntlReducer from './IntlReducer'\r\nimport IntlActionCreators from './IntlActionCreators'\r\nimport IntlSelectors from './IntlSelectors'\r\nimport {registerRootProvider} from '../ufp-react'\r\nimport UfpIntlProvider from './components/UfpIntlProvider'\r\nimport {addLocaleData} from 'react-intl'\r\nimport StartupConfigurator from '../startup/StartupConfiguration'\r\nvar onceRegistered = false\r\n\r\nconst Runfest = {\r\n    version: '0.2.0',\r\n    name: IntlConstants.NAME,\r\n    description: 'Ufp Internationalisation Manifest',\r\n\r\n    actionCreators: IntlActionCreators,\r\n    selectors: IntlSelectors,\r\n\r\n    /**\r\n     * returns a list of the distinct parent locales\r\n     * @private\r\n     */\r\n    configure: ({\r\n        locales = ThrowParam('At least one locale should be provided'),\r\n        languages = ThrowParam('At least one language should be provided')\r\n\r\n    }) => {\r\n        console.log('Registering locale', locales)\r\n        IntlConfig.locales.push(...locales)\r\n        IntlConfig.languages.push(...languages)\r\n    },\r\n\r\n    addLocaleData: (locale) => {\r\n        /**\r\n         * wrapper method to allow adding locales at runtime\r\n         *\r\n         */\r\n        addLocaleData(locale)\r\n    },\r\n    onRegistered({UfpCore = ThrowParam('UfpCore Instance Required')}) {\r\n        console.log('INTL Runfest is ', this)\r\n        console.log('INTL IntlConfig is ', IntlConfig)\r\n\r\n        if (onceRegistered) {\r\n            ThrowParam('UfpCore Already registered ')\r\n        }\r\n        onceRegistered = true\r\n\r\n        StartupConfigurator.registerStagedResource({\r\n            stage: '1',\r\n            name: 'initSetLanguage',\r\n            actionCreator: IntlActionCreators.initSetLanguage,\r\n            actionNameSuccess: IntlConstants.UPDATE_MESSAGES\r\n            //    actionNameFail: IntlConstants.SET_INIT_LANGUAGE.FAIL\r\n        })\r\n\r\n        // register provided locales (en is always present)\r\n        IntlConfig.getLocales()\r\n                  .map((locale) => {\r\n                      console.log('Adding locale data ', locale)\r\n\r\n                      addLocaleData(locale)\r\n                  })\r\n\r\n        registerRootProvider({component: UfpIntlProvider})\r\n\r\n        UfpCore.registerReducer({\r\n                id: IntlConstants.NAME,\r\n                reducer: IntlReducer\r\n            }\r\n        )\r\n    }\r\n}\r\n\r\nexport default Runfest\r\n"]}